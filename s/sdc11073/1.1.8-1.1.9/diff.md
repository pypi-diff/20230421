# Comparing `tmp/sdc11073-1.1.8-py3-none-any.whl.zip` & `tmp/sdc11073-1.1.9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,8 +1,8 @@
-Zip file size: 272805 bytes, number of entries: 86
+Zip file size: 273071 bytes, number of entries: 86
 -rw-rw-rw-  2.0 fat      431 b- defN 22-Feb-01 08:42 sdc11073/__init__.py
 -rw-rw-rw-  2.0 fat     3229 b- defN 22-Feb-01 08:42 sdc11073/certloader.py
 -rw-rw-rw-  2.0 fat     3369 b- defN 22-Feb-03 12:16 sdc11073/commlog.py
 -rw-rw-rw-  2.0 fat     3808 b- defN 22-Feb-01 08:42 sdc11073/compression.py
 -rw-rw-rw-  2.0 fat     2583 b- defN 22-Feb-01 08:42 sdc11073/dataconverters.py
 -rw-rw-rw-  2.0 fat     3764 b- defN 22-Feb-03 12:16 sdc11073/definitions_base.py
 -rw-rw-rw-  2.0 fat     9197 b- defN 22-Feb-03 12:16 sdc11073/definitions_sdc.py
@@ -13,16 +13,16 @@
 -rw-rw-rw-  2.0 fat     1460 b- defN 22-Feb-03 12:16 sdc11073/msgtypes.py
 -rw-rw-rw-  2.0 fat     9083 b- defN 22-Feb-01 08:42 sdc11073/multikey.py
 -rw-rw-rw-  2.0 fat     6652 b- defN 22-Feb-03 12:16 sdc11073/namespaces.py
 -rw-rw-rw-  2.0 fat      798 b- defN 22-Feb-01 08:42 sdc11073/nomenclature.py
 -rw-rw-rw-  2.0 fat    55355 b- defN 22-Feb-03 12:16 sdc11073/pmtypes.py
 -rw-rw-rw-  2.0 fat     2944 b- defN 22-Feb-01 08:42 sdc11073/safety.py
 -rw-rw-rw-  2.0 fat     3850 b- defN 22-Feb-03 12:16 sdc11073/schema_resolver.py
--rw-rw-rw-  2.0 fat       90 b- defN 22-Feb-04 12:23 sdc11073/version.py
--rw-rw-rw-  2.0 fat    76879 b- defN 22-Feb-04 11:36 sdc11073/wsdiscovery.py
+-rw-rw-rw-  2.0 fat       90 b- defN 22-Feb-10 08:37 sdc11073/version.py
+-rw-rw-rw-  2.0 fat    79184 b- defN 22-Feb-10 08:34 sdc11073/wsdiscovery.py
 -rw-rw-rw-  2.0 fat     2331 b- defN 22-Feb-03 12:16 sdc11073/xmlparsing.py
 -rw-rw-rw-  2.0 fat      153 b- defN 20-Jul-20 08:47 sdc11073/mdib/__init__.py
 -rw-rw-rw-  2.0 fat    47542 b- defN 22-Feb-03 12:16 sdc11073/mdib/clientmdib.py
 -rw-rw-rw-  2.0 fat     5248 b- defN 22-Feb-01 08:42 sdc11073/mdib/containerbase.py
 -rw-rw-rw-  2.0 fat    30965 b- defN 22-Feb-03 12:16 sdc11073/mdib/containerproperties.py
 -rw-rw-rw-  2.0 fat    31675 b- defN 22-Feb-03 12:16 sdc11073/mdib/descriptorcontainers.py
 -rw-rw-rw-  2.0 fat    60169 b- defN 22-Feb-03 12:16 sdc11073/mdib/devicemdib.py
@@ -76,13 +76,13 @@
 -rw-rw-rw-  2.0 fat     9218 b- defN 22-Feb-01 08:42 sdc11073/xsd/eventing.xsd
 -rw-rw-rw-  2.0 fat     5618 b- defN 20-Jul-20 08:47 sdc11073/xsd/soap-envelope.xsd
 -rw-rw-rw-  2.0 fat     5573 b- defN 20-Jul-20 08:47 sdc11073/xsd/ws-addr.xsd
 -rw-rw-rw-  2.0 fat    11763 b- defN 22-Feb-03 12:16 sdc11073/xsd/wsdd-discovery-1.1-schema-os.xsd
 -rw-rw-rw-  2.0 fat     9881 b- defN 20-Jul-20 08:47 sdc11073/xsd/wsdd-dpws-1.1-schema-os.xsd
 -rw-rw-rw-  2.0 fat    11774 b- defN 22-Feb-03 12:16 sdc11073/xsd/wsdl.xsd
 -rw-rw-rw-  2.0 fat     4753 b- defN 22-Feb-01 08:42 sdc11073/xsd/xml.xsd
--rw-rw-rw-  2.0 fat     1064 b- defN 22-Feb-04 12:23 sdc11073-1.1.8.dist-info/LICENSE
--rw-rw-rw-  2.0 fat     1619 b- defN 22-Feb-04 12:23 sdc11073-1.1.8.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 22-Feb-04 12:23 sdc11073-1.1.8.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        9 b- defN 22-Feb-04 12:23 sdc11073-1.1.8.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     7436 b- defN 22-Feb-04 12:23 sdc11073-1.1.8.dist-info/RECORD
-86 files, 1293442 bytes uncompressed, 261083 bytes compressed:  79.8%
+-rw-rw-rw-  2.0 fat     1064 b- defN 22-Feb-10 08:37 sdc11073-1.1.9.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat     1619 b- defN 22-Feb-10 08:37 sdc11073-1.1.9.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       97 b- defN 22-Feb-10 08:37 sdc11073-1.1.9.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        9 b- defN 22-Feb-10 08:37 sdc11073-1.1.9.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     7436 b- defN 22-Feb-10 08:37 sdc11073-1.1.9.dist-info/RECORD
+86 files, 1295752 bytes uncompressed, 261349 bytes compressed:  79.8%
```

## zipnote {}

```diff
@@ -237,23 +237,23 @@
 
 Filename: sdc11073/xsd/wsdl.xsd
 Comment: 
 
 Filename: sdc11073/xsd/xml.xsd
 Comment: 
 
-Filename: sdc11073-1.1.8.dist-info/LICENSE
+Filename: sdc11073-1.1.9.dist-info/LICENSE
 Comment: 
 
-Filename: sdc11073-1.1.8.dist-info/METADATA
+Filename: sdc11073-1.1.9.dist-info/METADATA
 Comment: 
 
-Filename: sdc11073-1.1.8.dist-info/WHEEL
+Filename: sdc11073-1.1.9.dist-info/WHEEL
 Comment: 
 
-Filename: sdc11073-1.1.8.dist-info/top_level.txt
+Filename: sdc11073-1.1.9.dist-info/top_level.txt
 Comment: 
 
-Filename: sdc11073-1.1.8.dist-info/RECORD
+Filename: sdc11073-1.1.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## sdc11073/version.py

```diff
@@ -1,4 +1,4 @@
 #generated file!
-version='1.1.8'
+version='1.1.9'
 
-gitrev='''0f58aa85f7daeb319c5d941b4b7bc745d53badbd'''
+gitrev='''4e27968b7fe45d489cc36b1d66982df6b06a0e11'''
```

## sdc11073/wsdiscovery.py

```diff
@@ -4,14 +4,15 @@
 import random
 import socket
 import struct
 import time
 import uuid
 import threading
 import sys
+import platform
 import selectors
 import re
 from collections import deque
 import traceback
 import logging
 import urllib
 from urllib.parse import urlparse
@@ -755,15 +756,15 @@
 
 @dataclass(frozen=True)
 class _SocketPair:
     multi_in: socket.socket
     multi_out_uni_in: socket.socket
 
 
-class _NetworkingThread(object):
+class _NetworkingThreadWindows(object):
     ''' Has one thread for sending and one for receiving'''
 
     @dataclass(order=True)
     class _EnqueuedMessage:
         send_time: float
         msg: Any = field(compare=False)
 
@@ -894,15 +895,14 @@
                         sock_name = sock_pair.multi_out_uni_in.getsockname()
                         if addr[1] == sock_name[1]:  # compare ports
                             return True
                     except OSError:  # port is not opened
                         continue
         return False
 
-
     def _recv_messages(self):
         """For performance reasons this thread only writes to a queue, no parsing etc."""
         for key, events in self._full_selector.select(timeout=0.1):
             sock = key.fileobj
             try:
                 data, addr = sock.recvfrom(BUFFER_SIZE)
             except socket.error as e:
@@ -1009,24 +1009,75 @@
         self._sendThread.join(10)
         self._recvThread = None
         self._qread_thread = None
         self._sendThread = None
         for sock in self._select_in:
             sock.close()
         self._uniOutSocket.close()
-        #self._unregister(self._multiInSocket)
-        #self._multiInSocket.close()
         self._full_selector.close()
         self._logger.debug('%s: ... join done', self.__class__.__name__)
 
     def getActiveAddresses(self):
         with self._sockets_by_address_lock:
             return list(self._sockets_by_address.keys())
 
 
+@dataclass(frozen=True)
+class _Sockets:
+    multi_in: socket.socket
+    uni_in: socket.socket
+    multi_out_uni_in: socket.socket
+
+
+class _NetworkingThreadPosix(_NetworkingThreadWindows):
+
+    @staticmethod
+    def _createMulticastInSocket(addr):
+        sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_UDP)
+        sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
+        sock.bind((MULTICAST_IPV4_ADDRESS, MULTICAST_PORT))
+        sock.setblocking(False)
+        mreq = struct.pack("4s4s", socket.inet_aton(MULTICAST_IPV4_ADDRESS), socket.inet_aton(addr))
+        sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq)
+        return sock
+
+    @staticmethod
+    def _createUnicastInSocket(addr):
+        sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_UDP)
+        sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
+        sock.bind((addr, MULTICAST_PORT))
+        sock.setblocking(False)
+        return sock
+
+    def addSourceAddr(self, addr):
+        """None means 'system default'"""
+        try:
+            multicast_in_sock = self._createMulticastInSocket(addr)
+        except socket.error:  # if 1 interface has more than 1 address, exception is raised for the second
+            print(traceback.format_exc())
+            pass
+        unicast_in_sock = self._createUnicastInSocket(addr)  # allows handling of unicast messages on MULTICAST_PORT
+        multicast_out_sock = self._createMulticastOutSocket(addr)
+
+        with self._sockets_by_address_lock:
+            self._register(multicast_out_sock)
+            self._register(unicast_in_sock)
+            self._register(multicast_in_sock)
+            self._sockets_by_address[addr] = _Sockets(multicast_in_sock, unicast_in_sock, multicast_out_sock)
+
+    def removeSourceAddr(self, addr):
+        sockets = self._sockets_by_address.get(addr)
+        if sockets:
+            with self._sockets_by_address_lock:
+                for sock in (sockets.multi_in, sockets.uni_in, sockets.multi_out_uni_in):
+                    self._unregister(sock)
+                    sock.close()
+                del self._sockets_by_address[addr]
+
+
 class Message:
     MULTICAST = 'multicast'
     UNICAST = 'unicast'
 
     def __init__(self, env, addr, port, msgType, initialDelay=0):
         """msgType shall be Message.MULTICAST or Message.UNICAST"""
         self._env = env
@@ -1740,16 +1791,18 @@
     def _networkAddressRemoved(self, addr):
         self._logger.debug('network Address removed %s', addr)
         self._networkingThread.removeSourceAddr(addr)
 
     def _startThreads(self):
         if self._networkingThread is not None:
             return
-
-        self._networkingThread = _NetworkingThread(self, self._logger)
+        if platform.system() != 'Windows':
+            self._networkingThread = _NetworkingThreadPosix(self, self._logger)
+        else:
+            self._networkingThread = _NetworkingThreadWindows(self, self._logger)
         self._networkingThread.start()
 
         self._addrsMonitorThread = _AddressMonitorThread(self)
         self._addrsMonitorThread.start()
 
     def _stopThreads(self):
         if self._networkingThread is None:
```

## Comparing `sdc11073-1.1.8.dist-info/LICENSE` & `sdc11073-1.1.9.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `sdc11073-1.1.8.dist-info/METADATA` & `sdc11073-1.1.9.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: sdc11073
-Version: 1.1.8
+Version: 1.1.9
 Summary: pure python implementation of IEEE11073 SDC protocol
 Home-page: https://github.com/Draegerwerk/sdc11073
 Author: Bernd Deichmann
 Author-email: bernd.deichmann@draeger.com
 License: UNKNOWN
 Keywords: SDC IEEE11073
 Platform: UNKNOWN
```

## Comparing `sdc11073-1.1.8.dist-info/RECORD` & `sdc11073-1.1.9.dist-info/RECORD`

 * *Files 3% similar despite different names*

```diff
@@ -12,16 +12,16 @@
 sdc11073/msgtypes.py,sha256=iydKRoqdFXWQNJ8qLnJBmsya0bjlygPZcuRVzLLrJZQ,1460
 sdc11073/multikey.py,sha256=0jX0EXbaD3fyqZdA4EeaNSIJiJuF_8FkTXzaSDrJj-8,9083
 sdc11073/namespaces.py,sha256=zyGOVSrAaAeS6cNXRzcIVqHaZbIZKxPbZ9cWc5Q62Mg,6652
 sdc11073/nomenclature.py,sha256=hSZcw_XGdJo_HZQI_Rytbc0H8v9DRSu91l6kqPGyXYI,798
 sdc11073/pmtypes.py,sha256=LBU804vHYone53yeRpgC-egI_Ba-_1O_LkMH2D1h0YI,55355
 sdc11073/safety.py,sha256=WRTrtiUtdefLO3mVXQTx5szimm5yOPlhjOacyG_1PS8,2944
 sdc11073/schema_resolver.py,sha256=518m29bEQEEiZQ-YojYreu1l9GtTJI2c2fTGUOomTQE,3850
-sdc11073/version.py,sha256=-Ni8IZFj-Be6dWy8ziR8q5p7L2x4GLdu7png1J8gqXE,90
-sdc11073/wsdiscovery.py,sha256=EV9GIr0h9AVJQjN6G_GKoVn95Oz-gdliYjQw0eY50XI,76879
+sdc11073/version.py,sha256=qtfopXITGRi71JHINtWOOlEIVpVeaWCKfdqsuAvUxI0,90
+sdc11073/wsdiscovery.py,sha256=pZ_BdQzU4gXQJqgxSEIHWxuymoV0SjJFBhO604Vc_vs,79184
 sdc11073/xmlparsing.py,sha256=NqN0mNqUzwEAi0j23GvgRszMH4ekcvRBgruVQRmVYBc,2331
 sdc11073/mdib/__init__.py,sha256=kWmyHZ8cVS3rN8leSP6Amf7I34RJxyRA9sHQzOxM-1Y,153
 sdc11073/mdib/clientmdib.py,sha256=j-8_tqZpPY95YkYXntJtYsW5I9BkNeJlMSl8mqSUv6I,47542
 sdc11073/mdib/containerbase.py,sha256=icWkope-NnUJqTSreqMzZrYi8xBebNoUz5IX9lH7bo4,5248
 sdc11073/mdib/containerproperties.py,sha256=niFe-mw-KwVUYemVJqPJ5rZHRp361Ql0FWPWGag6hB8,30965
 sdc11073/mdib/descriptorcontainers.py,sha256=3fAg_qvRh3F2k2eaNA7DOk5vJr2PqUG2Gar1ru0BIBM,31675
 sdc11073/mdib/devicemdib.py,sha256=_cESKYypFGTWYkzJmYZV7DgIKF3i_5e6Kzj-W0WYnyM,60169
@@ -75,12 +75,12 @@
 sdc11073/xsd/eventing.xsd,sha256=zGBXmeshinI7zdVcGnA5GweQPxeuepC0uhR2TW9jIiM,9218
 sdc11073/xsd/soap-envelope.xsd,sha256=uQ4hYR2Lx_kvEJSpJGPnE3wiXaNNkBJcCgHBML_07UM,5618
 sdc11073/xsd/ws-addr.xsd,sha256=DFZRauPiAFAnrlnKhrBxGbCtr21dHc-hCZjUlo7A2C4,5573
 sdc11073/xsd/wsdd-discovery-1.1-schema-os.xsd,sha256=lzDanIO3QOO8ftjXS6XBqF-bbV00txIuo9bl_WLNqfU,11763
 sdc11073/xsd/wsdd-dpws-1.1-schema-os.xsd,sha256=Su0JtxPb3QT6mnostXtJIeHxi3ECByQUcXzi0IW3oLw,9881
 sdc11073/xsd/wsdl.xsd,sha256=0s0s1ItsjE8GDgWLS0Ot83maKFKfg7NG6hivPz_V84I,11774
 sdc11073/xsd/xml.xsd,sha256=BoQHthwysNMtBsytujSai6hSM2nrnwy6sbAm6LiGUt8,4753
-sdc11073-1.1.8.dist-info/LICENSE,sha256=Md8p1yZ0u-RidMCrwjUYncSj0Js1-sFQr8QmzCIGb5U,1064
-sdc11073-1.1.8.dist-info/METADATA,sha256=ci-7YhABibkrgyYxU_fkgpU9O1fT9xWrj42A27rk1aI,1619
-sdc11073-1.1.8.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-sdc11073-1.1.8.dist-info/top_level.txt,sha256=8JEOxYtMSj45BV_0VL-hR6gK2U6L_Dri_RK3WSEWoDE,9
-sdc11073-1.1.8.dist-info/RECORD,,
+sdc11073-1.1.9.dist-info/LICENSE,sha256=Md8p1yZ0u-RidMCrwjUYncSj0Js1-sFQr8QmzCIGb5U,1064
+sdc11073-1.1.9.dist-info/METADATA,sha256=GXkQoBlUFSbglJBTg2c2vzD-61ncVO6O_NJyYl3QKSU,1619
+sdc11073-1.1.9.dist-info/WHEEL,sha256=YUYzQ6UQdoqxXjimOitTqynltBCkwY6qlTfTh2IzqQU,97
+sdc11073-1.1.9.dist-info/top_level.txt,sha256=8JEOxYtMSj45BV_0VL-hR6gK2U6L_Dri_RK3WSEWoDE,9
+sdc11073-1.1.9.dist-info/RECORD,,
```

