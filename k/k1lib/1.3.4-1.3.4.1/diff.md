# Comparing `tmp/k1lib-1.3.4-py3-none-any.whl.zip` & `tmp/k1lib-1.3.4.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,8 +1,8 @@
-Zip file size: 2518759 bytes, number of entries: 82
+Zip file size: 2519527 bytes, number of entries: 82
 -rw-rw-r--  2.0 unx     1435 b- defN 23-Feb-08 00:13 k1lib/__init__.py
 -rw-rw-r--  2.0 unx    53793 b- defN 23-Apr-02 08:25 k1lib/_baseClasses.py
 -rw-rw-r--  2.0 unx    13360 b- defN 23-Apr-17 07:32 k1lib/_basics.py
 -rw-rw-r--  2.0 unx     4234 b- defN 22-Dec-23 14:19 k1lib/_context.py
 -rw-rw-r--  2.0 unx     2866 b- defN 22-Jul-20 04:30 k1lib/_higher.py
 -rw-rw-r--  2.0 unx      948 b- defN 22-Sep-21 23:54 k1lib/_k1a.py
 -rw-rw-r--  2.0 unx    11646 b- defN 23-Jan-14 15:37 k1lib/_learner.py
@@ -60,25 +60,25 @@
 -rw-rw-r--  2.0 unx     1915 b- defN 21-Nov-12 16:48 k1lib/cli/mgi.py
 -rw-rw-r--  2.0 unx    34164 b- defN 23-Apr-17 07:22 k1lib/cli/modifier.py
 -rw-rw-r--  2.0 unx      694 b- defN 22-Nov-27 07:17 k1lib/cli/mol.py
 -rw-rw-r--  2.0 unx     3551 b- defN 23-Feb-02 17:12 k1lib/cli/nb.py
 -rw-rw-r--  2.0 unx     3530 b- defN 22-Aug-16 15:08 k1lib/cli/optimizations.py
 -rw-rw-r--  2.0 unx    11802 b- defN 23-Feb-08 13:54 k1lib/cli/output.py
 -rw-rw-r--  2.0 unx     2394 b- defN 23-Jan-25 02:03 k1lib/cli/sam.py
--rw-rw-r--  2.0 unx    38723 b- defN 23-Apr-21 14:30 k1lib/cli/structural.py
+-rw-rw-r--  2.0 unx    41604 b- defN 23-Apr-21 14:32 k1lib/cli/structural.py
 -rw-rw-r--  2.0 unx    10399 b- defN 22-Aug-05 01:15 k1lib/cli/trace.py
 -rw-rw-r--  2.0 unx    23319 b- defN 22-Sep-29 07:14 k1lib/cli/typehint.py
 -rw-rw-r--  2.0 unx    20147 b- defN 23-Jan-25 01:59 k1lib/cli/utils.py
 -rw-rw-r--  2.0 unx       20 b- defN 23-Jan-19 22:00 k1lib/k1ui/__init__.py
 -rw-rw-r--  2.0 unx    61803 b- defN 23-Feb-10 12:10 k1lib/k1ui/main.py
 -rw-rw-r--  2.0 unx       20 b- defN 22-Sep-16 01:12 k1lib/serve/__init__.py
 -rw-rw-r--  2.0 unx    10093 b- defN 23-Mar-19 11:14 k1lib/serve/main.py
 -rw-rw-r--  2.0 unx      642 b- defN 23-Feb-13 19:00 k1lib/serve/suffix.py
--rw-rw-r--  2.0 unx  2453826 b- defN 23-Jan-19 22:50 k1lib-1.3.4.data/data/k1lib/k1ui/256.model.state_dict.pth
--rw-rw-r--  2.0 unx   304735 b- defN 23-Jan-17 19:16 k1lib-1.3.4.data/data/k1lib/k1ui/mouseKey.pth
--rw-rw-r--  2.0 unx    20544 b- defN 23-Mar-19 11:14 k1lib-1.3.4.data/data/k1lib/serve/main.html
--rw-rw-r--  2.0 unx     1049 b- defN 23-Apr-21 14:30 k1lib-1.3.4.dist-info/LICENSE
--rw-rw-r--  2.0 unx     2911 b- defN 23-Apr-21 14:30 k1lib-1.3.4.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-Apr-21 14:30 k1lib-1.3.4.dist-info/WHEEL
--rw-rw-r--  2.0 unx        6 b- defN 23-Apr-21 14:30 k1lib-1.3.4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     6527 b- defN 23-Apr-21 14:30 k1lib-1.3.4.dist-info/RECORD
-82 files, 3439584 bytes uncompressed, 2508697 bytes compressed:  27.1%
+-rw-rw-r--  2.0 unx  2453826 b- defN 23-Jan-19 22:50 k1lib-1.3.4.1.data/data/k1lib/k1ui/256.model.state_dict.pth
+-rw-rw-r--  2.0 unx   304735 b- defN 23-Jan-17 19:16 k1lib-1.3.4.1.data/data/k1lib/k1ui/mouseKey.pth
+-rw-rw-r--  2.0 unx    20544 b- defN 23-Mar-19 11:14 k1lib-1.3.4.1.data/data/k1lib/serve/main.html
+-rw-rw-r--  2.0 unx     1049 b- defN 23-Apr-21 14:33 k1lib-1.3.4.1.dist-info/LICENSE
+-rw-rw-r--  2.0 unx     2913 b- defN 23-Apr-21 14:33 k1lib-1.3.4.1.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Apr-21 14:33 k1lib-1.3.4.1.dist-info/WHEEL
+-rw-rw-r--  2.0 unx        6 b- defN 23-Apr-21 14:33 k1lib-1.3.4.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     6543 b- defN 23-Apr-21 14:33 k1lib-1.3.4.1.dist-info/RECORD
+82 files, 3442483 bytes uncompressed, 2509433 bytes compressed:  27.1%
```

## zipnote {}

```diff
@@ -216,32 +216,32 @@
 
 Filename: k1lib/serve/main.py
 Comment: 
 
 Filename: k1lib/serve/suffix.py
 Comment: 
 
-Filename: k1lib-1.3.4.data/data/k1lib/k1ui/256.model.state_dict.pth
+Filename: k1lib-1.3.4.1.data/data/k1lib/k1ui/256.model.state_dict.pth
 Comment: 
 
-Filename: k1lib-1.3.4.data/data/k1lib/k1ui/mouseKey.pth
+Filename: k1lib-1.3.4.1.data/data/k1lib/k1ui/mouseKey.pth
 Comment: 
 
-Filename: k1lib-1.3.4.data/data/k1lib/serve/main.html
+Filename: k1lib-1.3.4.1.data/data/k1lib/serve/main.html
 Comment: 
 
-Filename: k1lib-1.3.4.dist-info/LICENSE
+Filename: k1lib-1.3.4.1.dist-info/LICENSE
 Comment: 
 
-Filename: k1lib-1.3.4.dist-info/METADATA
+Filename: k1lib-1.3.4.1.dist-info/METADATA
 Comment: 
 
-Filename: k1lib-1.3.4.dist-info/WHEEL
+Filename: k1lib-1.3.4.1.dist-info/WHEEL
 Comment: 
 
-Filename: k1lib-1.3.4.dist-info/top_level.txt
+Filename: k1lib-1.3.4.1.dist-info/top_level.txt
 Comment: 
 
-Filename: k1lib-1.3.4.dist-info/RECORD
+Filename: k1lib-1.3.4.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## k1lib/cli/structural.py

```diff
@@ -472,14 +472,98 @@
         for e in it:
             q.append(e)
             if len(q) == n: yield listF(q); q.popleft()
         if pad is not nothing:
             for i in range(n-1):
                 q.append(pad)
                 yield listF(q); q.popleft()
+class groupBy(BaseCli):
+    def __init__(self, column:int, separate:bool=False, removeCol:bool=None):
+        """Groups table by some column.
+Example::
+
+    a = [[2.3, 5],
+         [3.4, 2],
+         [4.5, 2],
+         [5.6, 5],
+         [6.7, 1]]
+    a | groupBy(1) | deref()
+
+This returns::
+
+    [[[6.7, 1]],
+     [[3.4, 2], [4.5, 2]],
+     [[2.3, 5], [5.6, 5]]]
+
+Should have O(n log(n)) time complexity. What if ``separate`` is True?
+
+    a | groupBy(1, True) | deref()
+
+This returns::
+
+    [[1, [[6.7]]],
+     [2, [[3.4], [4.5]]],
+     [5, [[2.3], [5.6]]]]
+
+What if ``removeCol`` is False?
+
+    a | groupBy(1, True, False) | deref()
+
+This returns::
+
+    [[1, [[6.7, 1]]],
+     [2, [[3.4, 2], [4.5, 2]]],
+     [5, [[2.3, 5], [5.6, 5]]]]
+
+See also: :class:`~k1lib.cli.grep.grep`
+
+:param column: which column to group by
+:param separate: whether to separate out the column to sort of form a dict or not. See example
+:param removeCol: whether to remove the grouped-by column. Defaults to True if
+    ``separate=True``, and False if ``separate=False``"""
+        self.column = column; self.separate = separate
+        if removeCol is None: removeCol = separate # if separate, then remove cols, else don't do it
+        self.removeCol = removeCol
+    def __ror__(self, it):
+        it = it | cli.deref(2); c = self.column; separate = self.separate; removeCol = self.removeCol
+        it = it | cli.sort(c, False); sentinel = object()
+        it = iter(it); a = [next(it, sentinel)]
+        if a[0] is sentinel: return
+        v = a[0][c]
+        try:
+            while True:
+                e = next(it)
+                if e[c] == v: a.append(e)
+                else:
+                    if removeCol: a = a | ~cli.cut(c)
+                    if separate: yield [v, a]
+                    else: yield a
+                    a = [e]; v = a[0][c]
+        except StopIteration:
+            if len(a) > 0:
+                if removeCol: a = a | ~cli.cut(c)
+                if separate: yield [v, a]
+                else: yield a
+class ungroup(BaseCli):
+    def __init__(self, insertCol:bool=True):
+        """Ungroups things that were grouped using :class:`groupBy`(..., True).
+Particularly useful to transform some complex data structure into a flat
+dataframe so that you can plug into pandas. Example::
+
+    a = [[2.3, 5], [3.4, 2], [4.5, 2], [5.6, 5], [6.7, 1]]
+    # returns [[6.7, 1], [3.4, 2], [4.5, 2], [2.3, 5], [5.6, 5]]
+    a | groupBy(1, True) | ungroup() | deref()
+    # returns [[6.7], [3.4], [4.5], [2.3], [5.6]]
+    a | groupBy(1, True) | ungroup(False) | deref()
+
+:param insertCol: whether to insert the column into the table or not"""
+        self.insertCol = insertCol
+    def __ror__(self, it):
+        if self.insertCol: return it | ~cli.apply(lambda x, arr: arr | cli.insert(x, False).all()) | cli.joinStreams()
+        else: return it | cli.cut(1) | cli.joinStreams()
 class insertColumn(BaseCli):
     def __init__(self, column:List[T], begin=True, fill=""):
         """Inserts a column at beginning or end.
 Example::
 
     # returns [['a', 1, 2], ['b', 3, 4]]
     [[1, 2], [3, 4]] | insertColumn(["a", "b"]) | deref()
```

## Comparing `k1lib-1.3.4.data/data/k1lib/k1ui/256.model.state_dict.pth` & `k1lib-1.3.4.1.data/data/k1lib/k1ui/256.model.state_dict.pth`

 * *Files identical despite different names*

## Comparing `k1lib-1.3.4.data/data/k1lib/k1ui/mouseKey.pth` & `k1lib-1.3.4.1.data/data/k1lib/k1ui/mouseKey.pth`

 * *Files identical despite different names*

## Comparing `k1lib-1.3.4.data/data/k1lib/serve/main.html` & `k1lib-1.3.4.1.data/data/k1lib/serve/main.html`

 * *Files identical despite different names*

## Comparing `k1lib-1.3.4.dist-info/LICENSE` & `k1lib-1.3.4.1.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `k1lib-1.3.4.dist-info/METADATA` & `k1lib-1.3.4.1.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: k1lib
-Version: 1.3.4
+Version: 1.3.4.1
 Summary: Some nice ML overhaul
 Home-page: https://k1lib.com
 Author: Quang Ho
 Author-email: 157239q@gmail.com
 License: MIT
 Requires-Python: >=3.7
 Description-Content-Type: text/markdown
```

## Comparing `k1lib-1.3.4.dist-info/RECORD` & `k1lib-1.3.4.1.dist-info/RECORD`

 * *Files 3% similar despite different names*

```diff
@@ -59,24 +59,24 @@
 k1lib/cli/mgi.py,sha256=aLke90nG89tgWLPwyKmTj3kM8yJnIBCJSrPS1jT8mUk,1915
 k1lib/cli/modifier.py,sha256=bd0C9fAg360qWKcLo7ZU_H9hRsWNz31XnLkGgXvn4A8,34164
 k1lib/cli/mol.py,sha256=wNFuCPXtdEcH4DRBbmYaLAWxtDzjN2MOKFX7ynJhaJs,694
 k1lib/cli/nb.py,sha256=SHqhYHJrzV8IzH3wM1Kb0LOVseOa1XXDKUtYE_2KTkQ,3551
 k1lib/cli/optimizations.py,sha256=iZ73DwLqZCxRm0sECVZ7A2nDxf5D4rsoSGzrKTgzGaI,3530
 k1lib/cli/output.py,sha256=Bg6k6PETVkCez_E64aOHhmfNvnbsg06GFeGXaPjRBsI,11802
 k1lib/cli/sam.py,sha256=_ersEPP2ue0Oa3AyftNjQu2PABpH4L7iFBbRJDOkeug,2394
-k1lib/cli/structural.py,sha256=x_4Qh1_rxIPvRA197Vm50ckZO-dVB1zAp7dG2mpOSPc,38723
+k1lib/cli/structural.py,sha256=J7907c6nTz3m4zfbl76d6ySnu8Bv5nEqQKOkHl3JAak,41604
 k1lib/cli/trace.py,sha256=nzZgOyXqFJYkQfbpR0lpX0Nnp0bQHXPjk8sDUBIe2hk,10399
 k1lib/cli/typehint.py,sha256=VBYxrOQaSnu5266lNWpgXIhXF7htdT0FT_NEvXjYBVk,23319
 k1lib/cli/utils.py,sha256=P5gGKjevBoWKtTIj5eKof1Xm3ZQRQ1B-DaFE_GD4ngU,20147
 k1lib/k1ui/__init__.py,sha256=8D5a8oKgqd6WA1RUkiKCn4l_PVemtyuckxQut0vDHXM,20
 k1lib/k1ui/main.py,sha256=PnmdOhkjYgRSZnDyGYNMYtQ5Nvcb1NhQ9yjfP_3QORI,61803
 k1lib/serve/__init__.py,sha256=8D5a8oKgqd6WA1RUkiKCn4l_PVemtyuckxQut0vDHXM,20
 k1lib/serve/main.py,sha256=SXZADDxXqZkxALeO01xwGKJ7c1sYMn4DjdY3RitMUaI,10093
 k1lib/serve/suffix.py,sha256=UH3ITN6O2vzoha2f6v4bcQG3_Boav7VA7EC8wf8r9f8,642
-k1lib-1.3.4.data/data/k1lib/k1ui/256.model.state_dict.pth,sha256=Ga-UXlAJfUPNOZsvP_c1-1cfB2Hp_-oQ4ghdouX1d7g,2453826
-k1lib-1.3.4.data/data/k1lib/k1ui/mouseKey.pth,sha256=KULhK_gdK2Ppju9gQnv1zV2kf_A0K-vX2W7trY6DIg8,304735
-k1lib-1.3.4.data/data/k1lib/serve/main.html,sha256=gHFNqzE9JKb4eCwCJN-Du45jj75lDRED4Ico91T-b4g,20544
-k1lib-1.3.4.dist-info/LICENSE,sha256=psuy2wnTg9zacuCQ0dXfxS44iaa89aTgsNzHDzx4UGM,1049
-k1lib-1.3.4.dist-info/METADATA,sha256=qr5_lfjZCd_83cZ9GTMJWV2OsuZlLXV3GKTyHgKcVv0,2911
-k1lib-1.3.4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-k1lib-1.3.4.dist-info/top_level.txt,sha256=xxWmqZzuThnLZn49Mse6A6j41-IVduPVnQW54imcOTA,6
-k1lib-1.3.4.dist-info/RECORD,,
+k1lib-1.3.4.1.data/data/k1lib/k1ui/256.model.state_dict.pth,sha256=Ga-UXlAJfUPNOZsvP_c1-1cfB2Hp_-oQ4ghdouX1d7g,2453826
+k1lib-1.3.4.1.data/data/k1lib/k1ui/mouseKey.pth,sha256=KULhK_gdK2Ppju9gQnv1zV2kf_A0K-vX2W7trY6DIg8,304735
+k1lib-1.3.4.1.data/data/k1lib/serve/main.html,sha256=gHFNqzE9JKb4eCwCJN-Du45jj75lDRED4Ico91T-b4g,20544
+k1lib-1.3.4.1.dist-info/LICENSE,sha256=psuy2wnTg9zacuCQ0dXfxS44iaa89aTgsNzHDzx4UGM,1049
+k1lib-1.3.4.1.dist-info/METADATA,sha256=5a_-qYG9PUesSNop2v58KgGE2HzGqjTA3M6BiY5kRQs,2913
+k1lib-1.3.4.1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+k1lib-1.3.4.1.dist-info/top_level.txt,sha256=xxWmqZzuThnLZn49Mse6A6j41-IVduPVnQW54imcOTA,6
+k1lib-1.3.4.1.dist-info/RECORD,,
```

